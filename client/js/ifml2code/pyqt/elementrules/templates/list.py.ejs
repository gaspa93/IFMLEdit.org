from PyQt4.QtGui import QListView, QStandardItemModel, QStandardItem
import json
<% if (selection) { -%>
import ../events/<%=selection.id %> as selected
<% }
   for (var i = 0; i < events.length; i++) { -%>
import ../events/<%=events[i].id %> as E<%=i %>
<% } -%>

def setupElem():
    # Our main window will be a QListView
    list = QListView()
    list.setMinimumSize(400, 200)

    # Create an empty model for the list's data
    model = QStandardItemModel(list)

    # add elements to list from JSON default file
    data = json.load(open("../repositories/<%=collection %>.json"))
    for elem in data:
<% for (var i = 0; i < fields.length; i += 1) { -%>
        model.appendRow(QStandardItem(elem["id"] + ", " + elem["<%=fields[i] %>"]))
<%     } -%>

    # Apply the model to the list view
    list.setModel(model)

    return list
